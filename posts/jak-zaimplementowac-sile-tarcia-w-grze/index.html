<!DOCTYPE html>
<html lang="pl" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Jak zaimplementowaÄ‡ siÅ‚Ä™ tarcia w grze | Kyriet&#39;s Blog ğŸ¦”</title>

<link rel="stylesheet" href="/css/main.css?v1" id="main-stylesheet">
<link rel="prefetch" href="/css/highlight-light.css?v1" id="highlight-light-stylesheet">


<link rel="stylesheet" href="/css/dark.css?v1" id="dark-stylesheet">
<link rel="stylesheet" href="/css/highlight-dark.css?v1" id="highlight-dark-stylesheet">



</head>
<body>
  <header>
    

  <nav>
    <div id="navigation">
      <a href="/">Home</a>
      <a href="/projects/">Projekty</a>
  
  
    
      <a href="/en/posts/jak-zaimplementowac-sile-tarcia-w-grze/">In English</a>
    
  
  
  <span id="toggle-theme-button" title="Toggle light/dark theme">ğŸŒ</span>
    </div>
    <span id="site-title">Kyriet&#39;s Blog ğŸ¦”</span>
  </nav>


  </header>
  <main>
    
  <h1>Jak zaimplementowaÄ‡ siÅ‚Ä™ tarcia w grze</h1>

   
  <time datetime="2025-05-23" style="display: none">2025-05-23</time>

  <p>JakiÅ› czas temu oglÄ…daÅ‚em wideo na YouTube, w ktÃ³rym indie game deweloper <a href="https://www.youtube.com/@randyprime">@randy</a> pokazywaÅ‚ jak zaimplementowaÅ‚ fizykÄ™ w swojej grze. MojÄ… uwagÄ™ zwrÃ³ciÅ‚a niepoprawnie (niezgodnie z zasadami fizyki) zaimplementowana siÅ‚a tarcia. W tym wpisie odpowiem dlaczego.</p>
<p>Najpierw zobaczmy jak zaimplementowana zostaÅ‚a podstawowa kinematyka ruchu przez randiego. PoniÅ¼ej przedstawiam pseudo kod:</p>
<pre tabindex="0"><code>new_velocity = old_velocity + acceleration * delta_time  // prÄ™dkoÅ›Ä‡ v(t)
new_position = old_position + new_velocity * delta_time  // przmieszczenie d(t)
</code></pre><p>Wszystko tutaj wyglÄ…da dobrze. Zmiana przemieszczenia w czasie, to jest fizyczna interpretacja prÄ™dkoÅ›ci, natomiast zmiana prÄ™dkoÅ›ci w czasie, to jest przyspieszenie.</p>
<p>A teraz popatrzmy jak @randy zaimplementowaÅ‚ siÅ‚Ä™ tarcia:</p>
<pre tabindex="0"><code>new_acceleration = old_acceleration - velocity * friction * delta_time
</code></pre><p>ChoÄ‡ powyÅ¼szy kod generuje efekt spowalniania ciaÅ‚a, ktÃ³re jest w ruchu, to jest to implementacja niezgodna z tym jak tarcie dziaÅ‚a w rzeczywistoÅ›ci. Dodam tylko, Å¼e my tutaj mÃ³wimy o tarciu dynamicznym, ktÃ³re dziaÅ‚a na ciaÅ‚o poruszajÄ…ce siÄ™ z prÄ™dkoÅ›ciÄ… v. SiÅ‚a taka nie zaleÅ¼y od prÄ™dkoÅ›ci, a jedynie od nacisku ciaÅ‚a na podÅ‚oÅ¼e (masa + siÅ‚a grawitacji). PowyÅ¼szy wzÃ³r zakÅ‚ada, Å¼e im szybciej porusza siÄ™ ciaÅ‚o sunÄ…ce po podÅ‚oÅ¼u, tym bardziej tarcie je spowalnia.</p>
<p>Tarcie jako â€siÅ‚aâ€ powinno wpÅ‚ywaÄ‡ na (zmieniaÄ‡) prÄ™dkoÅ›Ä‡ ciaÅ‚a. A poniewaÅ¼ zarÃ³wno masa jak i siÅ‚a grawitacji sÄ… staÅ‚e, to tarcie powinno byÄ‡ staÅ‚e przez caÅ‚y okres trwania ruchu.</p>
<p>W kaÅ¼dym przedziale czasu o dÅ‚ugoÅ›ci <code>delta_time</code> bierzemy wartoÅ›Ä‡ prÄ™dkoÅ›ci (ktÃ³ra jest Å›redniÄ… prÄ™dkoÅ›ciÄ… w tym przedziale czasu, bo w grach czas nie jest ciÄ…gÅ‚y jak w rzeczywistoÅ›ci) i odejmujemy od niej wartoÅ›Ä‡ siÅ‚y tarcia. Tarcie jest siÅ‚Ä…, a wiÄ™c zmianÄ… prÄ™dkoÅ›ci w czasie, wiÄ™c rÃ³wnieÅ¼ mnoÅ¼ymy jÄ… przez <code>delta_time</code>.</p>
<pre tabindex="0"><code>new_velocity = old_velocity + acceleration * delta_time - friction * delta_time
             = old_velocity + (acceleration - friction) * delta_time
new_position = old_position + new_velocity * delta_time
</code></pre><p>Wychodzi na to, Å¼e tarcie jest zwykÅ‚Ä… staÅ‚Ä…, ktÃ³ra zmniejsza przyspieszenie.</p>
<p>Ponadto zauwaÅ¼my, jak w rezultacie, do wyliczenia <code>new_position</code> mnoÅ¼ymy tarcie <code>friction</code> przez <code>delta_time</code> do kwadratu. PoniewaÅ¼ <em>tarcie</em> reprezentuje zmianÄ™ <em>prÄ™dkoÅ›ci</em> w czasie, a <em>prÄ™dkoÅ›Ä‡</em> reprezentuje zmianÄ™ <em>przemieszczenia</em> w czasie, to oznacza, Å¼e <em>tarcie</em> jest w tej sytuacji drugÄ… pochodnÄ… od <em>przemieszczenia</em> po czasie.</p>
<pre tabindex="0"><code>d&#34;(t) = v&#39;(t) = a(t) &lt;- tarcie w chwili t
</code></pre><p>OczywiÅ›cie w grach nie mamy prawdziwej â€chwiliâ€ <code>t</code> o dÅ‚ugoÅ›ci dÄ…Å¼Ä…cej do zera, wiÄ™c takie idealne wzory stanowiÄ… jedynie model do aproksymowania praw fizyki w przedziaÅ‚ach czasu miÄ™dzy jednÄ… wyÅ›wietlonÄ… klatkÄ… gry a drugÄ….</p>
<p>CaÅ‚kujÄ…c powyÅ¼szy wzÃ³r po czasie (dt) i zakÅ‚adajÄ…c, Å¼e tarcie <code>a(t)</code> jest staÅ‚e i rÃ³wne <code>a</code> (co wczeÅ›niej ustaliliÅ›my, Å¼e jest prawdÄ…), otrzymujemy:</p>
<pre tabindex="0"><code>v(t) = v0 + a * t
d(t) = d0 + v0 * t + (a * t * t) / 2
</code></pre><p>Zatem wyszÅ‚y klasyczne wzory na prÄ™dkoÅ›Ä‡ i przemieszczenie w ruchu jednostajnie przyspieszonym. Zero zaskoczenia, bo tarcie to po prostu siÅ‚a, a wiÄ™c przyspieszenie (spowolnienie) w kierunku przeciwnym do kierunku ruchu.</p>
<p>Na koniec dodam, Å¼e istnieje znana siÅ‚a hamujÄ…ca proporcjonalna do prÄ™dkoÅ›ci i jest to opÃ³r powietrza. WiÄ™c w rzeczywistoÅ›ci do wyliczenia <em>spowolnienia</em> i tak naleÅ¼y tÄ™ prÄ™dkoÅ›Ä‡ uwzglÄ™dniÄ‡. MoÅ¼e siÄ™ zatem okazaÄ‡, Å¼e tarcie zaimplementowane przez @randiego wcale nie jest aÅ¼ takÄ… zÅ‚Ä… aproksymacjÄ… jak siÄ™ na pierwszy rzut oka wydaje :)</p>

  </main>
  <footer>
    <div class="footer-links">
    <p><a href="https://github.com/KyrietS">github</a></p>
    <p><a href="/projects/">projekty</a></p>
    <p><a href="/">o mnie</a></p>
    <p><a href="/contact/">kontakt</a></p>
</div>


<div class="footer-last-edited">
  <a target="_blank" href="https://github.com/KyrietS/blog/commit/a4258b88e348eeda4e9826f6fe6a9a7de51ee4ef">Ostatnia modyfikacja: 2025-07-12</a>
</div>

  </footer>
</body>


<script src="/js/main.js"></script>

<!--Szata graficzna tego bloga zostaÅ‚a "zainspirowana" ğŸ˜ z tego bloga: https://thomashope.xyz/ -->
</html>
